<table>
    <thead>
        <tr>
            <th>Task</th>
            <th>Description</th>
            <th>Date</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let todo of todos; let i = index">
            <td>{{ todo.title }}</td>
            <td>{{ todo.description }}</td>
            <td>{{ todo.due_date | date: 'MMM d, y' }}</td>
            <td (click)="toggleStatusEdit(i)">
                <ng-container *ngIf="editingStatusIndex === i; else displayStatus">
                    <select [(ngModel)]="todo.status" (change)="changeStatus(i, todo.status)" class="status-dropdown">
                        <option value="todo">To Do</option>
                        <option value="doing">Doing</option>
                        <option value="done">Done</option>
                    </select>
                </ng-container>
                <ng-template #displayStatus>
                    <span [ngClass]="{
                    'status-todo': todo.status === 'todo',
                    'status-doing': todo.status === 'doing',
                    'status-done': todo.status === 'done'
                    }">{{ todo.status | uppercase }}</span>
                </ng-template>
            </td>
            <td>
                <button (click)="onDelete(i)" class="delete-button">Delete</button>
            </td>
        </tr>
        <tr *ngIf="todos.length === 0">
            <td colspan="5" class="no-tasks">No rows to display.</td>
        </tr>
    </tbody>
</table>
